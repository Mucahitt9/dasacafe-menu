<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel - Da&Sa Cafe Game</title>
  <link rel="icon" href="images/management-icon.png" type="image/png">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-6 min-h-screen">

  <!-- Header -->
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">â˜• Admin Panel</h1>
    <div class="flex gap-2 items-center">
      <span id="welcomeUser" class="text-green-400 font-semibold"></span>
      <a href="index.html" class="bg-yellow-500 hover:bg-yellow-600 text-black px-3 py-2 rounded text-sm">MenÃ¼ SayfasÄ±</a>
      <button onclick="logout()" class="bg-red-500 hover:bg-red-600 px-3 py-2 rounded text-sm">Ã‡Ä±kÄ±ÅŸ</button>
    </div>
  </div>

  <!-- ÃœrÃ¼n Formu -->
  <form id="productForm" class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-800 p-4 rounded mb-6">
    <input type="text" id="name" placeholder="ÃœrÃ¼n AdÄ±" class="p-2 rounded bg-white text-black" required />
    <select id="category" class="p-2 rounded bg-white text-black" required>
        <option value="">Kategori SeÃ§</option>
        <option value="Yemek">Yemek</option>
        <option value="TatlÄ±">TatlÄ±</option>
        <option value="Oyun">Oyun</option>
        <option value="SÄ±cak Ä°Ã§ecek">SÄ±cak Ä°Ã§ecek</option>
        <option value="SoÄŸuk Ä°Ã§ecek">SoÄŸuk Ä°Ã§ecek</option>
        <option value="Nargile">Nargile</option>
      </select>
          <input type="number" id="price" placeholder="Fiyat" class="p-2 rounded bg-white text-black" required />
    <input type="text" id="image" placeholder="GÃ¶rsel URL (isteÄŸe baÄŸlÄ±)" class="p-2 rounded bg-white text-black" />
    <textarea id="description" placeholder="AÃ§Ä±klama (Ã¶rnek: ekstra soslu...)" class="md:col-span-2 p-2 rounded bg-white text-black"></textarea>
    <button type="submit" class="bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded md:col-span-2">Ekle / GÃ¼ncelle</button>
  </form>

  <!-- ÃœrÃ¼n Listesi -->
  <h2 class="text-xl mb-2">ðŸ“‹ ÃœrÃ¼n Listesi</h2>
  <div id="productList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>

  <!-- JS -->
  <script>
    const welcomeEl = document.getElementById("welcomeUser");
    const username = localStorage.getItem("loggedInUser");

    if (!username) {
      window.location.href = "login.html";
    } else {
      welcomeEl.textContent = `HoÅŸ geldin, ${username}`;
    }

    function logout() {
      localStorage.removeItem("loggedInUser");
      window.location.href = "login.html";
    }

    let products = JSON.parse(localStorage.getItem("products")) || [];
    let editingIndex = null;

    document.getElementById("productForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const name = document.getElementById("name").value.trim();
      const category = document.getElementById("category").value.trim();
      const price = parseFloat(document.getElementById("price").value);
      const image = document.getElementById("image").value.trim();
      const description = document.getElementById("description").value.trim();

      if (!name || !category || isNaN(price)) {
        alert("LÃ¼tfen geÃ§erli bilgiler girin.");
        return;
      }

      const product = { name, category, price, image, description };

      if (editingIndex === null) {
        products.push(product);
      } else {
        products[editingIndex] = product;
        editingIndex = null;
      }

      localStorage.setItem("products", JSON.stringify(products));
      this.reset();
      renderProducts();
    });

    function renderProducts() {
      const list = document.getElementById("productList");
      list.innerHTML = "";

      products.forEach((product, index) => {
        const item = document.createElement("div");
        item.className = "bg-gray-800 p-4 rounded shadow-md text-sm flex items-start gap-4";

        item.innerHTML = `
          <img src="${product.image || 'https://via.placeholder.com/75'}" class="w-16 h-16 rounded-full object-cover flex-shrink-0" alt="ÃœrÃ¼n GÃ¶rseli">
          <div class="flex-1">
            <h3 class="text-lg font-bold">${product.name}</h3>
            <p class="text-gray-400 text-xs">${product.category} â€¢ ${product.price} TL</p>
            <p class="mt-1 text-gray-300">${product.description || ''}</p>
            <div class="mt-2 flex gap-2">
              <button onclick="editProduct(${index})" class="bg-blue-500 px-2 py-1 rounded text-xs">DÃ¼zenle</button>
              <button onclick="deleteProduct(${index})" class="bg-red-500 px-2 py-1 rounded text-xs">Sil</button>
            </div>
          </div>
        `;
        list.appendChild(item);
      });
    }

    function editProduct(index) {
      const product = products[index];
      document.getElementById("name").value = product.name;
      document.getElementById("category").value = product.category;
      document.getElementById("price").value = product.price;
      document.getElementById("image").value = product.image || "";
      document.getElementById("description").value = product.description || "";
      editingIndex = index;
    }

    function deleteProduct(index) {
      if (confirm("Bu Ã¼rÃ¼nÃ¼ silmek istediÄŸine emin misin?")) {
        products.splice(index, 1);
        localStorage.setItem("products", JSON.stringify(products));
        renderProducts();
      }
    }

    renderProducts();
  </script>
</body>
</html>
